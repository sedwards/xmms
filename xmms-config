#!/bin/sh

# xmms-config
#
# Tool for retrieving the library/include paths XMMS was compiled with.
#
# Useful for folks compiling their own XMMS plugins outside the main
# source tree.
#
# Written 15 December 1999 by Ben Gertzfield <che@debian.org>
# Based *HEAVILY* on gtk-config from the GTK+ library package.
#
# This work is released under the GNU GPL, version 2 or later.

prefix="/usr/local"
exec_prefix="${prefix}"
exec_prefix_set=no
data_dir="${prefix}/share/xmms"

version="0.0.1"
include_dir="${prefix}/include"
xmms_include_dir="${prefix}/include/xmms"
lib_dir="${exec_prefix}/lib"

if ( (gtk-config --version) > /dev/null 2>&1)  then
   gtk_libs=`gtk-config --libs`
   gtk_cflags=`gtk-config --cflags`
else
   gtk_libs="-L/opt/homebrew/Cellar/gtk+3/3.24.43/lib -L/opt/homebrew/Cellar/pango/1.54.0/lib -L/opt/homebrew/Cellar/harfbuzz/10.0.1_1/lib -L/opt/homebrew/Cellar/at-spi2-core/2.54.0/lib -L/opt/homebrew/Cellar/cairo/1.18.2/lib -L/opt/homebrew/Cellar/gdk-pixbuf/2.42.12/lib -L/opt/homebrew/Cellar/glib/2.82.1/lib -L/opt/homebrew/opt/gettext/lib -lgtk-3 -lgdk-3 -Wl,-framework,Cocoa -Wl,-framework,Carbon -Wl,-framework,CoreGraphics -lpangocairo-1.0 -lpango-1.0 -lharfbuzz -latk-1.0 -lcairo-gobject -lcairo -lgdk_pixbuf-2.0 -lgio-2.0 -lgobject-2.0 -lglib-2.0 -lintl"
   gtk_cflags="-I/opt/homebrew/Cellar/gtk+3/3.24.43/include/gtk-3.0 -I/opt/homebrew/Cellar/glib/2.82.1/include/gio-unix-2.0 -I/opt/homebrew/Cellar/cairo/1.18.2/include -I/opt/homebrew/Cellar/libepoxy/1.5.10/include -I/opt/homebrew/Cellar/pango/1.54.0/include/pango-1.0 -I/opt/homebrew/Cellar/harfbuzz/10.0.1_1/include/harfbuzz -I/opt/homebrew/Cellar/pango/1.54.0/include/pango-1.0 -I/opt/homebrew/Cellar/fribidi/1.0.16/include/fribidi -I/opt/homebrew/Cellar/harfbuzz/10.0.1_1/include/harfbuzz -I/opt/homebrew/Cellar/graphite2/1.3.14/include -I/opt/homebrew/Cellar/at-spi2-core/2.54.0/include/atk-1.0 -I/opt/homebrew/Cellar/cairo/1.18.2/include/cairo -I/opt/homebrew/Cellar/fontconfig/2.15.0/include -I/opt/homebrew/opt/freetype/include/freetype2 -I/opt/homebrew/Cellar/libxext/1.3.6/include -I/opt/homebrew/Cellar/libxrender/0.9.11/include -I/opt/homebrew/Cellar/libx11/1.8.10/include -I/opt/homebrew/Cellar/libxcb/1.17.0/include -I/opt/homebrew/Cellar/libxau/1.0.11/include -I/opt/homebrew/Cellar/libxdmcp/1.1.5/include -I/opt/homebrew/Cellar/pixman/0.42.2/include/pixman-1 -I/opt/homebrew/Cellar/gdk-pixbuf/2.42.12/include/gdk-pixbuf-2.0 -I/opt/homebrew/opt/libpng/include/libpng16 -I/opt/homebrew/Cellar/libtiff/4.7.0/include -I/opt/homebrew/opt/zstd/include -I/opt/homebrew/Cellar/xz/5.6.3/include -I/opt/homebrew/Cellar/jpeg-turbo/3.0.4/include -I/opt/homebrew/Cellar/glib/2.82.1/include -I/opt/homebrew/Cellar/glib/2.82.1/include/glib-2.0 -I/opt/homebrew/Cellar/glib/2.82.1/lib/glib-2.0/include -I/opt/homebrew/opt/gettext/include -I/opt/homebrew/Cellar/pcre2/10.44/include -I/opt/homebrew/Cellar/xorgproto/2024.1/include -I/Library/Developer/CommandLineTools/SDKs/MacOSX14.sdk/usr/include/ffi"
fi

plugin_dir="${exec_prefix}/lib/xmms"
visualization_plugin_dir="${exec_prefix}/lib/xmms/Visualization"
input_plugin_dir="${exec_prefix}/lib/xmms/Input"
output_plugin_dir="${exec_prefix}/lib/xmms/Output"
effect_plugin_dir="${exec_prefix}/lib/xmms/Effect"
general_plugin_dir="${exec_prefix}/lib/xmms/General"

usage()
{
    cat <<EOF
Usage: xmms-config [OPTIONS]
Options:
    [--prefix[=DIR]]
    [--exec-prefix[=DIR]]
    [--version]
    [--libs]
    [--cflags]
    [--data-dir]
    [--plugin-dir]
    [--visualization-plugin-dir]
    [--input-plugin-dir]
    [--output-plugin-dir]
    [--effect-plugin-dir]
    [--general-plugin-dir]

EOF
    exit $1
}

if test $# -eq 0; then
    usage 1 1>&2
fi


while test $# -gt 0; do
    case "$1" in
	-*=*) optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
	*) optarg= ;;
    esac

    case $1 in
	--prefix=*)
	    prefix=$optarg
	    if test $exec_prefix_set = no ; then
		exec_prefix=$optarg
	    fi
	    ;;

	--prefix)
	    echo_prefix=yes
	    ;;

	--exec-prefix=*)
	    exec_prefix=$optarg
	    exec_prefix_set=yes
	    ;;

	--exec-prefix)
	    echo_exec_prefix=yes
	    ;;

	--version)
	    echo $version
	    ;;

	--cflags)
	    echo_cflags=yes
	    ;;

	--libs)
	    echo_libs=yes
	    ;;

	--data-dir)
	    echo_data_dir=yes
	    ;;

	--plugin-dir)
	    echo_plugin_dir=yes
	    ;;

	--visualization-plugin-dir)
	    echo_visualization_plugin_dir=yes
	    ;;

	--input-plugin-dir)
	    echo_input_plugin_dir=yes
	    ;;

	--output-plugin-dir)
	    echo_output_plugin_dir=yes
	    ;;

	--general-plugin-dir)
	    echo_general_plugin_dir=yes
	    ;;

	--effect-plugin-dir)
	    echo_effect_plugin_dir=yes
	    ;;

	*)
	    usage 1 1>&2
	    ;;
    esac
  shift
done

if test "$echo_prefix" = "yes"; then
    echo $prefix
fi

if test "$echo_exec_prefix" = "yes"; then
    echo $exec_prefix
fi

if test "$include_dir" != "/usr/include"; then
    cflags="-I$include_dir -I$xmms_include_dir $gtk_cflags"
else
    cflags="-I$xmms_include_dir $gtk_cflags"
fi

if test "$lib_dir" != "/usr/lib"; then
    libs="-L$lib_dir $gtk_libs -lxmms"
else
    libs="$gtk_libs -lxmms"
fi

if test "$echo_cflags" = "yes"; then
    echo $cflags
fi

if test "$echo_libs" = "yes"; then
    echo $libs
fi

if test "$echo_data_dir" = "yes"; then
    echo $data_dir
fi

if test "$echo_plugin_dir" = "yes"; then
    echo $plugin_dir
fi

if test "$echo_visualization_plugin_dir" = "yes"; then
    echo $visualization_plugin_dir
fi

if test "$echo_input_plugin_dir" = "yes"; then
    echo $input_plugin_dir
fi

if test "$echo_output_plugin_dir" = "yes"; then
    echo $output_plugin_dir
fi

if test "$echo_general_plugin_dir" = "yes"; then
    echo $general_plugin_dir
fi

if test "$echo_effect_plugin_dir" = "yes"; then
    echo $effect_plugin_dir
fi
